<!doctype html>
<head>
<meta charset="utf-8">
<title>MikroLock - Liest und schreibt verschl&uuml;sselte miniLock-Dateien</title>

<style type="text/css">

</style>
</head>

<body>

<h1>MikroLock</h1>
<p>
MikroLock liest und schreibt verschl&uuml;sselte miniLock-Dateien.
</p>

<h2>&Uuml;bersicht</h2>
<p>
MikroLock ist eine schnelle Implementierung der miniLock-Spezifikation.
Trotz des Namens (und im Gegensatz zum Original) kann MikroLock auch mit gro&szlig;en Dateien umgehen.
</p>

<p>
Hauptziel der Entwicklung ist ein unkomplizierter Austausch verschlüsselter
Daten, z.B. durch E-Mail oder Cloud-Dienste. Die Verschlüsselung basiert auf
modernen Public-Key Verfahren, jedoch ohne aufwändige Konfiguration und
Einarbeitung. Das miniLock-Format kann durch die gleichnamige Chrome-Erweiterung auch dann
eingesetzt werden, wenn keine Software wie MikroLock installiert werden kann (Firmen-Richtlinien o.ä.).
</p>

<p>
Eine kurze Zusammenfassung der miniLock-Eigenschaften (Quelle: <a href="https://minilock.io">https://minilock.io</a>):
<br>
<i>&quot;
Enter your miniLock passphrase on any computer, and you'll get access to your
miniLock ID. No key storage or management - just a single passphrase to access
your miniLock identity anywhere.
&quot;</i>
</p>

<p>
Eine MiniLock-ID  ist ein kurzer Public-Key der von einer geheimen Passphrase und einer E-Mail Adresse abgeleitet wurde.
Diese ID kann  auf Webseiten, in Mailsignaturen, auf Twitter oder sonstwo ver&ouml;ffentlicht werden, damit jedermann in der Lage ist Inhalte für diese ID zu verschl&uuml;sseln.
Nur ein Empf&auml;nger mit  der richtigen Passphrase/Mail-Kombination zur Erzeugung dieser ID kann die Daten wieder entschl&uuml;sseln.
</p>

<p>
Eine MiniLock-ID sieht wie folgt aus: <code>jrcY8VJWKihbiLsDnaMaNSoL2fZSTiRmEeJcKGBYxnb83</code>
</p>

<p>
Da  diese IDs sehr bequem zu handhaben sind, ist kein aufw&auml;ndiger  Schl&uuml;sseltausch  mit Keyservern oder manuellen Dateikopien notwendig.
</p>

<p>
Beim Verschl&uuml;sseln kann eine Liste von miniLock-IDs  angegeben werden, um mehreren Empf&auml;ngern zu erm&ouml;glichen die Daten zu entschl&uuml;sseln.
Es muss also nicht eine separate Datei f&uuml;r jeden Empf&auml;nger erzeugt werden.
MiniLock-Dateien enthalten keine sichtbaren Hinweise auf Ihre Empf&auml;nger.
</p>


<h2>Wie funktioniert's?</h2>
<p>
A  m&ouml;chte etwas f&uuml;r B verschl&uuml;sseln. B gibt seine Mail-Adresse und Passphrase in MikroLock ein, um seine MiniLock-ID zu erhalten. Diese ID sendet er an A.<br>
A verschl&uuml;sselt die Datei und gibt die MiniLock-ID von B als Empf&auml;nger-ID an. A sendet nun die verschl&uuml;sselte Datei an B, der sie mit seiner Passphrase/Mail-Kombination entschl&uuml;sseln kann.<br>
Wichtig hierbei ist, dass die Passphrase geheim bleibt - es werden nur die MiniLock-IDs (=public keys) ausgetauscht.
</p>


<h2>Die grafische Benutzeroberfl&auml;che</h2>

<p>
Nach dem Start des Programms werden eine Mail-Adresse und ein Passwort abgefragt.
Aus diesen Informationen wird ein Schl&uuml;sselpaar gebildet (privater und &ouml;ffentlicher Schl&uuml;ssel).<br>
Statt der Mail-Adresse kann auch ein anderer Wert angegeben werden, dies sollte man jedoch nur tun wenn man das miniLock Chrome-Plugin nicht nutzen m&ouml;chte.<br>
Damit die verschl&uuml;sselte Datei wirksam gesch&uuml;tzt ist, muss eine Passphrase, die weniger als 40 Zeichen lang ist, aus mehreren zuf&auml;llig gew&auml;hlten W&ouml;rtern bestehen.<br>
</p>

<br><br>
<img src=":/manual/manual1.png"  border="0" alt="MikroLock GUI 1">

<p>
Hier k&ouml;nnen auch Unicode-Zeichen eingegeben werden:
</p>

<br><br>
<img src=":/manual/manual2.png"  border="0" alt="MikroLock GUI 2">

<p>
Das <b>Mail-Icon</b> zeigt die G&uuml;ltigkeit der Mail-Adresse an:

<table border="0">
<tr>
<td>
<img src=":/Status-mail-unread-icon.png"  border="0" alt="Icon 1" width="32">
</td><td style="vertical-align:middle">
das Format der Mail-Adresse ist gültig
</td>
</tr><tr>
<td>
<img src=":/Status-mail-unread-new-icon.png"  border="0" alt="Icon 1" width="32">
</td><td style="vertical-align:middle">
das Format der Mail-Adresse ist nicht gültig
</td>
</tr>
</table>

<br><br>Das <b>Ampel-Icon</b> neben dem Passwort zeigt folgende Information an:

<table border="0">
<tr>
<td>
<img src=":/Status-security-low-icon.png"  border="0" alt="Icon 1" width="32">
</td><td style="vertical-align:middle">
die Passphrase ist zu kurz oder enth&auml;lt zuwenig durch Leerzeichen getrennte W&ouml;rter
</td>
</tr><tr>
<td>
<img src=":/Status-security-medium-icon.png"  border="0" alt="Icon 1" width="32">
</td><td style="vertical-align:middle">
die Passphrase wird wahrscheinlich vom Original MiniLock-Plugin f&uuml;r Chrome abgewiesen
</td>
</tr><tr>
<td>
<img src=":/Status-security-high-icon.png"  border="0" alt="Icon 1" width="32">
</td><td style="vertical-align:middle">
die Passphrase ist ausreichend sicher
</td>
</tr>
</table>

Nach dem Klick auf &quot;Meine miniLock-ID erzeugen&quot; wird die eigene ID am unteren Fensterrand angezeigt. Sie kann dort auch kopiert werden.<br><br>
Nun wird zum Ein- und Ausgabedialog gewechselt:
</p>

<br><br>
<img src=":/manual/manual3.png"  border="0" alt="MikroLock GUI 3">

<p>
Hier wird das Ausgabeverzeichnis ausgew&auml;hlt und anschlie&szlig;end die Datei zur Ver- bzw. Entschl&uuml;sselung (sollte das Programm mit einer Datei als Argument aufgerufen worden sein, so wird dessen Pfad bereits in der Statusleiste angezeigt).<br>
Man kann auch eine Datei auf das Programmfenster ziehen.<br><br>
Wenn eine miniLock-Datei ausgew&auml;hlt wurde, wird diese automatisch entschl&uuml;sselt.<br>Jede andere Datei wird im n&auml;chsten Dialog verschl&uuml;sselt:
</p>

<br><br>
<img src=":/manual/manual4.png"  border="0" alt="MikroLock GUI 4">

<p>
In der oberen Liste werden die miniLock-IDs der Datei-Empf&auml;nger angegeben.<br>
Mit &quot;Liste einlesen&quot; wird eine Textdatei importiert, die pro Zeile eine MiniLock-ID enth&auml;lt. Hinter den IDs k&ouml;nnen in der Datei die dazugehörigen Namen wie folgt eingetragen werden:
<pre>
y5qBLmncv36r98tFMw5YVoc9SHkfLDg8Wz7zf9yrPYPh2 / Andre Simon
8SmHNEEZiK1RgWoN9xryJb8opBky9Kh7txhmgb1RLrUrW ; Customer XYZ
sVXHR7smwqXkSbphn8gdH3Ah6a1nvbYtuXPpxG6qKT321 - Schmidt
ULgpTbP7isNNV6kgDbNVtQo5YRuUhc4N5AAEEbne9bjJi | Jane
</pre>
Die Information hinter den Trennern wird nach dem Laden als Tooltip angezeigt.
<br>
Der Button &quot;Empf&auml;nger l&ouml;schen&quot; entfernt die Empf&auml;nger-IDs aus der Liste.<br>
Die Option &quot;Meine ID auslassen&quot; entfernt die eigene miniLock-ID aus der Empf&auml;ngerliste.<br>
Mit &quot;Zufallsnamen erzeugen&quot; wird die verschl&uuml;sselte Datei unter einem zuf&auml;llig gew&auml;hlten Namen gespeichert.<br><br>
Nach dem Klick auf &quot;Datei verschl&uuml;sseln&quot; wird die miniLock-Datei im vorher angegebenen Zielverzeichnis abgelegt.
</p>


<h2>Die Kommandozeilenversion</h2>
<p>
Neben der grafischen Oberfl&auml;che gibt es auch eine Kommandozeilenversion von MikroLock.
</p>
<pre>
USAGE: mikrolock [OPTION]...
mikrolock reads and writes encrypted miniLock files (https://minilock.io/)

Available options:

  -E, --encrypt &lt;file&gt;  Encrypt the given file (see -r)
  -D, --decrypt &lt;file&gt;  Decrypt the given miniLock file
  -o, --output &lt;file&gt;   Override the target file name (assumes -D or -E)
  -m, --mail &lt;string&gt;   User mail address (salt)
  -r, --rcpt &lt;string&gt;   Recipient's miniLock ID (may be repeated, assumes -E)

  -h, --help            Print this help screen
  -l, --list &lt;file&gt;     Recipient list text file (contains one miniLock ID per line)
                        ID descriptions may be added using these delimiters: space or one of [,;/|-]
  -p, --pinentry        Use pinentry program to ask for the passphrase
  -q, --quiet           Do not print progress information
  -R, --random-name     Generate random output filename; write to current working directory (assumes -E)
  -v, --version         Print version information
  -x, --exclude-me      Exlude own miniLock ID from recipient list (assumes -E)

If neither -E nor -D is given, mikrolock exits after showing your miniLock ID.
</pre>

<h2>Beispiele der Kommandozeilenversion</h2>

<h3>Verschl&uuml;sselung</h3>
<pre>
mikrolock --encrypt secret.data --mail sendersalt@holygrail.com --rcpt EX9k9VmGzjg7mUBFN9mzc7nkcvhmD6fGZTq3nefEajjxX
Please enter your secret passphrase:
Unlocking...
Your miniLock-ID: aUwncs2D48MqB8VFta7RRJ5bjL9PfsmtWF3zYVb3zFLLW
Encrypting file secret.data...
Progress 100%
Calculating file hash...
Progress 100%
Destination file: secret.data.minilock
</pre>

<p>
Die verschl&uuml;sselte Datei ist secret.data.minilock<br>
Diese Datei kann vom Emp&auml;nger EX9k9VmGzjg7mUBFN9mzc7nkcvhmD6fGZTq3nefEajjxX entschl&uuml;sselt werden.
</p>

<h3>Entschl&uuml;sselung</h3>

<pre>
mikrolock --decrypt secret.data.minilock --mail receiver@test.org
Please enter your secret passphrase:
Unlocking...
Your miniLock-ID: EX9k9VmGzjg7mUBFN9mzc7nkcvhmD6fGZTq3nefEajjxX
Decrypting file secret.data.minilock...
Calculating file hash...
Progress 100%
Writing to file secret.data...
Progress 100%
Destination file: secret.data
</pre>
</p>

<h2>Kompatibilität mit der miniLock-Browsererweiterung</h2>
<p>
Das miniLock Dateiformat wurde mit der Chrome-Erweiterung miniLock eingeführt.<br>
MiniLock-Dateien können mit beiden Programmen verarbeitet werden, allerdings unterscheiden sich die akzeptierten Eingaben zur Erzeugung der miniLock-ID:
</p>
<ul>
<li>miniLock nimmt nur gültige Mailadressen als Salt-Wert an; MikroLock nimmt jeden Wert</li>
<li>miniLock prüft die Mindest-Entropie der Passphrase; MikroLock könnte auch eine Passphrase mit geringerer Entropie akzeptieren</li>
</ul>
<p>
Sollten Sie MikroLock und miniLock gleichzeitig benutzen wollen, prüfen Sie ob Salt und Passphrase in beiden Programmen gültige Eingaben sind.
</p>

<h2>Verwendete Crypto-Funktionen</h2>
<p>
Die MiniLock-ID wird wie folgt erzeugt:</p>
<pre>secret := <a href="http://doc.libsodium.org/password_hashing/README.html#key-derivation" target="new">scrypt</a>(<a href="https://blake2.net" target="new">blake2</a>(passphrase), mail, 131072, 1)
id := <a href="https://en.wikipedia.org/wiki/Base58" target="new">base58</a>( <a href="http://doc.libsodium.org/advanced/scalar_multiplication.html" target="new">crypto_scalarmult_base</a>(secret) + <a href="https://blake2.net" target="new">blake2</a>(secret) )
</pre>
<p>
Der JSON-Dateiheader der MiniLock-Dateien enth&auml;lt die MiniLock-ID des Senders, die IDs der Empf&auml;nger sowie Schl&uuml;ssel (zuf&auml;llig erzeugt) und Hashwert der verschl&uuml;sselten Eingabedatei.<br><br>
Diese Informationen werden separat mit jeder angegebenen Empf&auml;nger-ID als Public-Key mittels <a href="http://doc.libsodium.org/public-key_cryptography/authenticated_encryption.html" target="new">crypto_box_easy</a>  verschl&uuml;sselt (Schl&uuml;sseltausch: Curve25519; Verfahren: XSalsa20 stream cipher; Authentifizierung: Poly1305 MAC).<br><br>
Die Eingabedatei wird mit <a href="http://doc.libsodium.org/secret-key_cryptography/authenticated_encryption.html" target="new">crypto_secretbox_easy</a> verschl&uuml;sselt (Verfahren: XSalsa20 stream cipher; Authentifizierung: Poly1305 MAC). <br><br>
Mehr Infos zu den kryptographischen Eigenschaften und dem Dateiformat: <a href="https://minilock.io">https://minilock.io</a>.
</p>

</body>
</html>
